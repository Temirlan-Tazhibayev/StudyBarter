{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport { Form, Button, Alert } from 'react-bootstrap';\nimport \"./styles/Login.css\";\nimport { useMutation, gql } from '@apollo/client';\nimport { useNavigate } from 'react-router-dom';\nimport { ImageLogo } from \"./ImageLogo.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar SIGN_IN_MUTATION = gql`\nmutation signIn(\n  $email: String!, \n  $password: String!){\n  signIn(input: { \n    email: $email, \n    password: $password\n  }) {\n    token\n    user {\n      id,\n      name,\n      email\n    }\n  }\n}\n`;\nfunction SignIn() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var navigate = useNavigate();\n  var _useMutation = useMutation(SIGN_IN_MUTATION),\n    _useMutation2 = _slicedToArray(_useMutation, 2),\n    signIn = _useMutation2[0],\n    _useMutation2$ = _useMutation2[1],\n    data = _useMutation2$.data,\n    loading = _useMutation2$.loading,\n    error = _useMutation2$.error;\n  useEffect(function () {\n    if (error) {\n      console.error('Error:', error);\n    }\n  }, [error]);\n  var onSubmit = function () {\n    var _ref = _asyncToGenerator(function* (event) {\n      event.preventDefault();\n      try {\n        var result = yield signIn({\n          variables: {\n            email: email,\n            password: password\n          }\n        });\n        console.log(result);\n        var token = result.data.signIn.token;\n        localStorage.setItem('token', token);\n        navigate('/');\n      } catch (error) {\n        console.error('Error:', error);\n        if (error.message.includes('Invalid credentials')) {\n          console.log('Invalid password');\n        } else {\n          console.log('An error occurred during sign-in');\n        }\n      }\n    });\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return _jsx(\"div\", {\n    className: \"col-lg-6 form-wrap mx-auto\",\n    children: _jsxs(\"div\", {\n      className: \"bd-reg-login text-center\",\n      id: \"bd-ma-login\",\n      children: [_jsx(ImageLogo, {}), _jsx(\"h2\", {\n        className: \"login-heading\",\n        children: \"Hey there! Welcome back.\"\n      }), error && _jsxs(Alert, {\n        variant: \"danger\",\n        children: [_jsx(Alert.Heading, {\n          children: \"An error occurred:\"\n        }), _jsx(\"p\", {\n          children: error.message\n        })]\n      }), _jsxs(Form, {\n        className: \"woocommerce-form woocommerce-form-login login\",\n        onSubmit: onSubmit,\n        children: [_jsxs(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"username\",\n          children: [_jsxs(Form.Label, {\n            children: [\"Email address\", _jsx(\"span\", {\n              className: \"required\",\n              children: \"*\"\n            })]\n          }), _jsx(Form.Control, {\n            type: \"text\",\n            className: \"woocommerce-Input woocommerce-Input--text input-text\",\n            name: \"email\",\n            value: email,\n            onChange: function onChange(event) {\n              return setEmail(event.target.value);\n            }\n          })]\n        }), _jsxs(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"password\",\n          children: [_jsxs(Form.Label, {\n            children: [\"Password\", _jsx(\"span\", {\n              className: \"required\",\n              children: \"*\"\n            })]\n          }), _jsx(\"span\", {\n            className: \"password-input\",\n            children: _jsx(Form.Control, {\n              type: \"password\",\n              className: \"woocommerce-Input woocommerce-Input--text input-text\",\n              name: \"password\",\n              value: password,\n              onChange: function onChange(event) {\n                return setPassword(event.target.value);\n              }\n            })\n          })]\n        }), _jsx(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"rememberme\",\n          children: _jsx(Button, {\n            type: \"submit\",\n            className: \"woocommerce-button button woocommerce-form-login__submit\",\n            name: \"login\",\n            disabled: loading,\n            children: loading ? 'Logging in...' : 'Log in'\n          })\n        }), _jsx(\"p\", {\n          className: \"woocommerce-LostPassword lost_password text-center\",\n          children: _jsx(\"a\", {\n            href: \"https://www.bootstrapdash.com/my-account/lost-password\",\n            \"data-wpel-link\": \"internal\",\n            children: \"Lost your password?\"\n          })\n        }), _jsx(\"p\", {\n          className: \"toggle-login text-center\",\n          children: _jsx(\"a\", {\n            href: \"/signUp\",\n            id: \"show-ma-register\",\n            \"data-wpel-link\": \"internal\",\n            children: \"Don\\u2019t have an account? Sign up\"\n          })\n        })]\n      })]\n    })\n  });\n}\nexport { SignIn };","map":{"version":3,"names":["React","useState","useEffect","Form","Button","Alert","useMutation","gql","useNavigate","ImageLogo","jsx","_jsx","jsxs","_jsxs","SIGN_IN_MUTATION","SignIn","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","navigate","_useMutation","_useMutation2","signIn","_useMutation2$","data","loading","error","console","onSubmit","_ref","_asyncToGenerator","event","preventDefault","result","variables","log","token","localStorage","setItem","message","includes","_x","apply","arguments","className","children","id","variant","Heading","Group","controlId","Label","Control","type","name","value","onChange","target","disabled","href"],"sources":["C:/Users/ABN AniGame/Documents/GitHub/StudyBarter/app/web/view/SignIn.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\r\n// import NavigationBar from './Header';\r\nimport { Form, Button, Alert } from 'react-bootstrap';\r\nimport './styles/Login.css';\r\nimport { useMutation, gql } from '@apollo/client';\r\nimport { useNavigate  } from 'react-router-dom';\r\n// import { Alert } from 'react-native';\r\nimport { ImageLogo } from './ImageLogo.js'\r\n\r\nconst SIGN_IN_MUTATION = gql`\r\nmutation signIn(\r\n  $email: String!, \r\n  $password: String!){\r\n  signIn(input: { \r\n    email: $email, \r\n    password: $password\r\n  }) {\r\n    token\r\n    user {\r\n      id,\r\n      name,\r\n      email\r\n    }\r\n  }\r\n}\r\n`;\r\n\r\nfunction SignIn() {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n  \r\n    const navigate = useNavigate();\r\n  \r\n    const [signIn, { data, loading, error }] = useMutation(SIGN_IN_MUTATION);\r\n  \r\n    useEffect(() => {\r\n      if (error) {\r\n        console.error('Error:', error);\r\n        // Handle the error, e.g., display an error message to the user\r\n      }\r\n    }, [error]);\r\n  \r\n    const onSubmit = async (event) => {\r\n      event.preventDefault();\r\n    \r\n      try {\r\n        const result = await signIn({ variables: { email, password } });\r\n        console.log(result);\r\n        const token = result.data.signIn.token;\r\n        localStorage.setItem('token', token);\r\n        // Navigate to the desired location\r\n        navigate('/');\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n    \r\n        if (error.message.includes('Invalid credentials')) {\r\n          // Handle the case where the entered password is incorrect\r\n          // You can display an error message to the user\r\n          console.log('Invalid password'); \r\n        } else {\r\n          // Handle other errors, e.g., display a generic error message\r\n          console.log('An error occurred during sign-in');\r\n        }\r\n      }\r\n    };\r\n    \r\n\r\n  return (\r\n    <div className=\"col-lg-6 form-wrap mx-auto\">\r\n      <div className=\"bd-reg-login text-center\" id=\"bd-ma-login\">\r\n      < ImageLogo/>\r\n        <h2 className=\"login-heading\">Hey there! Welcome back.</h2>\r\n        {/* <p className=\"login-subheading\">Login to your account</p> */}\r\n        {error && (\r\n                <Alert variant=\"danger\">\r\n                    <Alert.Heading>An error occurred:</Alert.Heading>\r\n                    <p>{error.message}</p>\r\n                </Alert>\r\n            )}\r\n        <Form className=\"woocommerce-form woocommerce-form-login login\" onSubmit={onSubmit}>\r\n          <Form.Group className=\"mb-3\" controlId=\"username\">\r\n            <Form.Label>Email address<span className=\"required\">*</span></Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              className=\"woocommerce-Input woocommerce-Input--text input-text\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={(event) => setEmail(event.target.value)}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\" controlId=\"password\">\r\n            <Form.Label>Password<span className=\"required\">*</span></Form.Label>\r\n            <span className=\"password-input\">\r\n              <Form.Control\r\n                type=\"password\"\r\n                className=\"woocommerce-Input woocommerce-Input--text input-text\"\r\n                name=\"password\"\r\n                value={password}\r\n                onChange={(event) => setPassword(event.target.value)}\r\n              />\r\n            </span>\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\" controlId=\"rememberme\">\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"woocommerce-button button woocommerce-form-login__submit\"\r\n              name=\"login\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Logging in...' : 'Log in'}\r\n            </Button>\r\n          </Form.Group>\r\n\r\n          <p className=\"woocommerce-LostPassword lost_password text-center\">\r\n            \r\n            <a href=\"https://www.bootstrapdash.com/my-account/lost-password\" data-wpel-link=\"internal\">\r\n              Lost your password?\r\n            </a>\r\n          </p>\r\n          <p className=\"toggle-login text-center\">\r\n            <a href=\"/signUp\" id=\"show-ma-register\" data-wpel-link=\"internal\">\r\n              Donâ€™t have an account? Sign up\r\n            </a>\r\n          </p>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport {SignIn};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}